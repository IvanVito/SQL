# Отчет по заданию "Day 07 - Piscine SQL"

Я сосредоточился на использовании агрегированных данных для анализа и улучшения нашей модели данных в PostgreSQL, выполнив следующие шаги:

1. Прочитал правила и инструкции, убедился, что использую актуальную версию PostgreSQL.
2. Установил и настроил свою базу данных с использованием предоставленного скрипта для создания модели данных.
3. Выполнил упражнения, связанные с использованием агрегированных данных:

   **ex00 :**
   - Создал SQL-запрос для подсчета количества посещений каждой пиццерии каждым человеком. Запрос возвращает идентификаторы людей и соответствующее количество посещений, сортируя данные по количеству посещений в порядке убывания и по `person_id` в порядке возрастания.

   **ex01 :**
   - Модифицировал запрос из ex00, чтобы возвращать имена людей вместо их идентификаторов. Добавил условие для отображения только 4-х людей с максимальным количеством посещений в каждой пиццерии и отсортировал результаты по имени человека.

   **ex02 :**
   - Написал SQL-запрос для отображения 3-х самых популярных ресторанов по количеству посещений и заказов. Добавил столбец `action_type` с указанием типа действия (`order` или `visit`) и отсортировал результаты сначала по типу действия, затем по количеству в убывающем порядке.

   **ex03 :**
   - Создал запрос, который группирует рестораны по количеству посещений и заказов, объединяя данные по имени ресторана. Рассчитал общее количество действий (посещений и заказов) для каждого ресторана и отсортировал результаты по суммарному количеству в убывающем порядке, а затем по имени ресторана в возрастающем порядке.

   **ex04 :**
   - Написал запрос, который возвращает имена людей и количество их посещений пиццерий, если человек посетил пиццерии более 3-х раз. Использовал клаузу `HAVING` для фильтрации данных.

   **ex05 :**
   - Создал запрос для получения списка уникальных имен людей, которые сделали заказы в пиццериях. Результаты отсортированы по имени человека в алфавитном порядке. Запрос не использовал конструкцию `GROUP BY` и другие работы с множествами.

   **ex06 :**
   - Разработал SQL-запрос для получения количества заказов, средней цены, максимальной и минимальной цены пиццы для каждого ресторана. Средняя цена округлена до двух знаков после запятой. Результаты отсортированы по имени пиццерии.

   **ex07 :**
   - Написал запрос для расчета общего среднего рейтинга всех ресторанов, округленного до четырех знаков после запятой.

   **ex08 :**
   - Создал SQL-запрос для поиска адресов и названий пиццерий, а также количества заказов каждого человека в его городе. Результаты отсортированы сначала по адресу, затем по названию пиццерии.

   **ex09 :**
   - Написал запрос, который возвращает агрегированную информацию по адресу человека, включая расчет "Максимальный возраст - (Минимальный возраст / Максимальный возраст)" и средний возраст по адресу. Добавил столбец для сравнения формулы и среднего значения, отображая `True`, если формула больше среднего, иначе `False`. Результаты отсортированы по адресу.

В процессе выполнения задания я освоил методы агрегации данных, работы с подзапросами, группировками и функциями для анализа данных в SQL. Эти навыки помогут эффективно обрабатывать и анализировать данные, что важно для разработки и оптимизации реальных бизнес-приложений.