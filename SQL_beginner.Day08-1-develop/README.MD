# Отчет по заданию "Day 08 - Piscine SQL"

Я изучил работу транзакций и уровни изоляции в базах данных, выполнив следующие шаги:

1. Прочитал правила и инструкции, убедился, что использую актуальную версию PostgreSQL.
2. Убедился, что использую актуальную версию PostgreSQL и подготовил свою базу данных с помощью предоставленного скрипта `model.sql`.
3. Выполнение упражнений, касающихся транзакций и уровней изоляции:

   **ex00 : Простая транзакция**
   - Открыл два параллельных сеанса в командной строке PostgreSQL (psql).
   - **Сеанс #1:** Обновил рейтинг пиццерии "Pizza Hut" до 5 баллов в рамках транзакции и не совершал `COMMIT`.
   - **Сеанс #2:** Проверил, что изменения, сделанные в сеансе #1, не видны, пока сеанс #1 не завершит транзакцию.
   - **Сеанс #1:** Совершил `COMMIT`, чтобы опубликовать изменения.
   - **Сеанс #2:** Проверил, что изменения стали видны после завершения транзакции в сеансе #1.

   **ex01 : Аномалия потерянного обновления**
   - Открыл два параллельных сеанса в командной строке.
   - В обоих сеансах проверил текущий рейтинг пиццерии "Pizza Hut".
   - **Сеанс #1:** Обновил рейтинг на 4 балла.
   - **Сеанс #2:** Обновил рейтинг на 3.6 балла.
   - Показал, что одно из обновлений было потеряно, и финальное значение рейтинга оказалось некорректным.

   **ex02 : Аномалия потерянного обновления для Repeatable Read**
   - В обоих сеансах установил уровень изоляции на `REPEATABLE READ`.
   - Выполнил аналогичные шаги, как в ex01, и показал, что аномалия потерянного обновления все еще наблюдается, хотя уровень изоляции отличается.

   **ex03 : Аномалия нереплицируемых чтений**
   - Открыл два сеанса и установил уровень изоляции на `READ COMMITTED`.
   - В одном сеансе проверил рейтинг пиццерии "Pizza Hut".
   - В другом сеансе обновил рейтинг на 3.6.
   - Показал, что изменения видны в одном сеансе, но не в другом, что иллюстрирует аномалию нереплицируемых чтений.

   **ex04 : Нереплицируемые чтения для Serializable**
   - Установил уровень изоляции на `SERIALIZABLE` в обоих сеансах.
   - В первом сеансе проверил рейтинг пиццерии "Pizza Hut".
   - Во втором сеансе обновил рейтинг на 3.0.
   - Показал, что даже при уровне изоляции `SERIALIZABLE`, аномалия нереплицируемых чтений может иметь место, но ее проявления могут быть иными.

   **ex05 : Аномалия фантомных чтений**
   - Открыл два сеанса с уровнем изоляции `READ COMMITTED`.
   - В первом сеансе подсчитал суммарный рейтинг всех пиццерий.
   - Во втором сеансе обновил рейтинг пиццерии "Pizza Hut" на 1.
   - Показал аномалию фантомных чтений, когда обновления в одном сеансе оказывают влияние на результаты выборки в другом сеансе.

   **ex06 : Фантомные чтения для Repeatable Read**
   - Установил уровень изоляции на `REPEATABLE READ`.
   - В первом сеансе подсчитал суммарный рейтинг всех пиццерий.
   - Во втором сеансе обновил рейтинг пиццерии "Pizza Hut" на 5.
   - Показал, что с уровнем изоляции `REPEATABLE READ` фантомные чтения проявляются иначе, чем при других уровнях изоляции.

   **ex07 : Дедлок**
   - Открыл два параллельных сеанса.
   - В обоих сеансах выполнил действия, которые могут привести к дедлоку, используя таблицу `pizzeria`.
   - Показал пример дедлока, который возник при попытке одновременного изменения данных из двух сеансов, что иллюстрирует проблемы, возникающие при блокировках и конфликте транзакций.

В процессе выполнения задания я изучил различные аномалии в базе данных, такие как потерянные обновления, нереплицируемые чтения, фантомные чтения и дедлоки. Также освоил методы работы с транзакциями и уровнями изоляции для обеспечения целостности и консистентности данных. Эти знания помогут в разработке и поддержке систем баз данных в реальных проектах.